{{ define "main" }}
  <section class="section">
    <div class="container">
      <div class="row justify-center">
        
        <div class="mx-auto text-center lg:col-8" data-aos="fade-up-sm">
          <p class="mb-2 font-medium text-tertiary">
            {{ .Params.subtitle | default "Guides" | markdownify }}
          </p>
          <h2 class="mb-6">{{ .Params.title | markdownify }}</h2>
          <p class="text-lg ">
            {{ .Params.description | markdownify }}
          </p>
        </div>
        
        {{ with .Content }}
        <div class="col-12 pt-0">
          <div class="content text-center">
            {{ . }}
          </div>
        </div>
        {{ end }}

        <div class="col-12 pt-10" data-aos="fade-up-sm" data-aos-delay="200">
          <div class="row g-4">
            
            {{/* FIX 1: Iterates and orders by 'weight' (from lowest to highest).
            This ensures all child pages in the guides section are included and sorted correctly. */}}
            {{ range .Pages.ByWeight }}
              <div class="md:col-6">
                {{ partial "guide-card.html" (dict "context" .) }}
              </div>
            {{ end }}
            
          </div>
          
          {{ partial "components/pagination.html" . }}
        </div>
        
      </div>
    </div>
  </section>
  
  {{ partial "call-to-action.html" . }}
  
{{ end }}